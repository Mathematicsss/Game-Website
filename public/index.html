<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Build the Most Reliable Car</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Exo+2:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="bg-wrap">
    <div class="bg-image" aria-hidden="true"></div>
    <div class="bg-overlay"></div>
  </div>

  <main class="app">
    <!-- Home / Choice -->
    <section id="view-home" class="view active">
      <div class="logo">
        <span class="logo-icon">⚙</span>
        <h1>Build the Most Reliable Car</h1>
      </div>
      <div class="rules-card rules-card--compact" aria-label="How the game works">
        <h2 class="rules-title">How it works</h2>
        <ul class="rules-list">
          <li>Pick one part in each of 10 categories (engine, brakes, and more).</li>
          <li>Your score = reliability + risk. You have <strong>200</strong> to spend. If you go over 200, you lose 5 points.</li>
          <li>Weakest parts = 1 star. No 1-star part = +5 points. Three or more 1-star parts = −5 points.</li>
        </ul>
      </div>
      <div class="card home-card">
        <img src="https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=800&q=80" alt="Car" class="card-hero">
        <div class="card-body">
          <button type="button" class="btn btn-primary btn-block" id="btn-host">Create Game</button>
          <div class="divider"><span>or join with code</span></div>
          <div class="join-row">
            <input type="text" id="input-code" placeholder="Game code" maxlength="6" autocomplete="off">
            <input type="text" id="input-team" placeholder="Team name" maxlength="24">
            <button type="button" class="btn btn-secondary" id="btn-join">Join</button>
          </div>
          <p id="home-error" class="error-msg" hidden></p>
        </div>
      </div>
    </section>

    <!-- Lobby (host) -->
    <section id="view-lobby-host" class="view">
      <div class="lobby-header">
        <h2>Your game code</h2>
        <p class="game-code" id="lobby-code">------</p>
        <p class="hint">Share this code so teams can join.</p>
      </div>
      <div class="card">
        <h3>Teams in lobby</h3>
        <ul id="lobby-teams" class="team-list"></ul>
        <button type="button" class="btn btn-primary btn-block" id="btn-start" disabled>Start Game</button>
        <p class="hint">At least one team must join to start.</p>
        <button type="button" class="btn btn-secondary btn-block" id="btn-back-host">Back</button>
      </div>
    </section>

    <!-- Lobby (player) -->
    <section id="view-lobby-player" class="view">
      <div class="lobby-header">
        <h2>You're in</h2>
        <p class="game-code" id="player-code">------</p>
        <p class="team-name" id="player-team-name"></p>
        <p class="hint">Wait for the host to start the game.</p>
      </div>
      <div class="card">
        <h3>Teams in lobby</h3>
        <ul id="lobby-teams-player" class="team-list"></ul>
        <button type="button" class="btn btn-secondary btn-block" id="btn-back-player">Back</button>
      </div>
    </section>

    <!-- Game (category question) -->
    <section id="view-game" class="view">
      <div id="game-rules-overlay" class="rules-overlay" hidden aria-modal="true" aria-labelledby="game-rules-overlay-title">
        <div class="rules-overlay-content">
          <h2 id="game-rules-overlay-title" class="rules-overlay-title">How you get points</h2>
          <ul class="rules-overlay-list">
            <li>Pick one part in each of 10 categories.</li>
            <li>Your score = reliability + risk. You have <strong>200</strong> to spend. If you go over 200, you lose 5 points.</li>
            <li>The weakest parts have 1 star. No 1-star part = +5 points. Three or more 1-star parts = −5 points.</li>
          </ul>
          <button type="button" class="btn btn-primary btn-block" id="btn-rules-got-it">OK — start picking</button>
        </div>
      </div>
      <div class="game-reminder" aria-live="polite">
        <span class="game-reminder-text">You have 200 to spend. Over 200 = −5 points. Your score = reliability + risk.</span>
      </div>
      <div class="game-progress">
        <span class="progress-label">Category</span>
        <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
        <span class="progress-text" id="progress-text">1 / 10</span>
      </div>
      <div class="card game-card">
        <h2 class="category-title" id="category-title">Engine</h2>
        <p class="category-desc" id="category-desc">Choose one option. Budget and reliability matter for your final score.</p>
        <div class="options" id="game-options"></div>
        <p id="answer-feedback" class="answer-feedback" hidden></p>
      </div>
    </section>

    <!-- Leaderboard (Kahoot-style podium) -->
    <section id="view-leaderboard" class="view">
      <div class="leaderboard-header">
        <h2 class="podium-title">Podium!</h2>
        <p class="subtitle">Highest-scoring teams</p>
      </div>
      <div class="podium-wrap">
        <div class="podium" id="podium">
          <div class="podium-place podium-2nd" id="podium-2nd">
            <div class="podium-avatar" id="podium-avatar-2"></div>
            <span class="podium-name" id="podium-name-2"></span>
            <div class="podium-badge podium-badge-silver">2</div>
            <span class="podium-score" id="podium-score-2"></span>
            <div class="podium-actions" id="podium-actions-2"></div>
          </div>
          <div class="podium-place podium-1st" id="podium-1st">
            <div class="podium-avatar" id="podium-avatar-1"></div>
            <span class="podium-name" id="podium-name-1"></span>
            <div class="podium-badge podium-badge-gold">1</div>
            <span class="podium-score" id="podium-score-1"></span>
            <div class="podium-actions" id="podium-actions-1"></div>
          </div>
          <div class="podium-place podium-3rd" id="podium-3rd">
            <div class="podium-avatar" id="podium-avatar-3"></div>
            <span class="podium-name" id="podium-name-3"></span>
            <div class="podium-badge podium-badge-bronze">3</div>
            <span class="podium-score" id="podium-score-3"></span>
            <div class="podium-actions" id="podium-actions-3"></div>
          </div>
        </div>
      </div>
      <div class="card leaderboard-card">
        <h3>4th place and below</h3>
        <ol id="leaderboard-list" class="leaderboard-list"></ol>
      </div>
      <button type="button" class="btn btn-primary btn-block" id="btn-play-again">Play Again</button>
    </section>

    <!-- Car build stats modal -->
    <div id="car-stats-modal" class="car-stats-modal" hidden aria-modal="true" aria-labelledby="car-stats-modal-title">
      <div class="car-stats-modal-backdrop"></div>
      <div class="car-stats-modal-content">
        <h2 id="car-stats-modal-title" class="car-stats-modal-title"></h2>
        <div class="car-stats-grid" id="car-stats-grid"></div>
        <p class="car-stats-verdict" id="car-stats-verdict"></p>
        <h3 class="car-stats-parts-title">Parts you chose</h3>
        <ul class="car-stats-parts-list" id="car-stats-parts-list"></ul>
        <button type="button" class="btn btn-primary btn-block" id="btn-close-car-stats">Close</button>
      </div>
    </div>
  </main>

  <script src="js/config.js"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
